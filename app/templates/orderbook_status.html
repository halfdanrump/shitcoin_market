<script type="text/javascript" charset="utf-8">
  $(document).ready(function(){
	var socket = io.connect('http://' + document.domain + ':' + location.port + '/client');    
    function get_orderbook_html(book){
    	var b = '<tr><th>Sell volume</th><th>Price</th><th>Buy volume</th></tr>';
      $.each(jQuery.parseJSON(book['sell_side']), function(index, tuple){
        b += '<tr><td>' + tuple[1] + '</td><td>' + tuple[0] + '</td><td></td></tr>';
      });
      $.each(jQuery.parseJSON(book['buy_side']), function(index, tuple){
        b += '<tr><td></td><td>' + tuple[0] + '</td><td>' + tuple[1] +'</td></tr>';
      });
      
      return b;
    };

    socket.on('orderbook update', function(book){
      b = get_orderbook_html(book);
      $('#orderbook_table').html(b);
    });

  });
</script>


<div id="orderbook_data">
  <table id="orderbook_table">
    <tr>
      <th>Sell volume</th>
      <th>Price</th>
      <th>Buy volume</th>
    </tr>
  </table>
</div>
<div id="messages"></div>
